# 2026-01-31

## Session Summary

### Infrastructure Updates
- **Memory embedding:** Working with `gemini-embedding-001` provider
- **Brave Search:** API key configured and functional via `openclaw configure --section web`
- **Current model:** Claude Opus 4.5

### Major AGENTS.md Update

Updated AGENTS.md with comprehensive workflow strategies after detailed discussion with Avinash. Key additions:

#### 1. Tiered Model Architecture
- **Heavy models** (Opus, Gemini Pro): Complex reasoning, orchestration, tool usage
- **Local models** (llama3:8B, deepseek-coder:6.7b): Content generation, code drafting

#### 2. Local Model Constraint & Workaround
- **Critical:** Local models CANNOT use tools (hardware limitation)
- **Solution:** Content Generation + Tool Execution split
  - Local model generates text/code as raw string
  - Heavy model receives output and executes tool calls (`write`, `exec`)
- **Fallback:** If local model fails after 1-2 retries, heavy model takes over

#### 3. openspec Workflow
- Heavy model orchestrates and provides precise prompts
- Local model generates structured spec content
- Heavy model validates (including CLI validation if available)
- Iterative refinement loop for errors

#### 4. beads Workflow
- Same principle: local generates task descriptions, heavy executes `bd` commands
- Always use `workdir` parameter for `bd` commands

#### 5. Workspace Context Management (Lesson from KanjiReader)
- **Problem:** Sub-agents running `bd` from wrong directory; changing global workspace broke memory access
- **Solution:** 
  - Core workspace stays fixed at `~/.openclaw/workspace`
  - Use `workdir` parameter in `exec` for project-specific commands
  - Track active project path in memory state
  - `read`/`write` tools must use **full absolute paths** (no workdir param)
  - `exec` commands use `workdir=<project_path>`

### Gemini Review
- Reviewed AGENTS.md updates with gemini-2.5-pro
- Feedback incorporated: fallback strategy, file path clarification
- Overall assessment: "Major step forward, more robust and scalable"

### Active Project
- **KanjiReader** at `/home/krot/.openclaw/workspace/project/KanjiReader`
- Phase 1 complete, ready for Phase 2 (Camera)
- 33 beads tasks tracked

## Next Session
- Read this file + yesterday's (2026-01-30.md)
- Continue KanjiReader if needed
- Use tiered model strategy as documented in AGENTS.md
